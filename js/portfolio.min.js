!
function(a) {
    "use strict";
    var b = {
        initialised: !1,
        container: a("#portfolio-item-container"),
        init: function() {
            if (!this.initialised) {
                this.initialised = !0;
                var b = this;
                a.fn.imagesLoaded && imagesLoaded(b.container,
                function() {
                    b.calculateWidth(),
                    b.isotopeActivate(),
                    b.isotopeFilter(),
                    b.hoverAnimation(),
                    b.prettyPhoto(),
                    b.infinitescroll(),
                    b.openProject(),
                    b.closeProject()
                })
            }
        },
        calculateWidth: function() {
            var b, c = a(window).width(),
            d = this.container.width(),
            e = this.container.data("maxcolumn");
            b = c > 1600 ?  5 : c > 1170 ?  4 : c > 768 ? 3 : c > 540 ? 2 : 1;
            this.container.find(".pic-frame").css("width", Math.floor((d-10*b) / b))/* 10为外边距的两倍*/
        },
        isotopeActivate: function() {
            {
                var a = this.container,
                b = a.data("layoutmode");
                a.isotope({
                    itemSelector: ".pic-frame",
                    layoutMode: b ? b: "masonry"
                }).data("isotope")
            }
        },
        isotopeReinit: function() {
            this.container.isotope("destroy"),
            this.isotopeActivate()
        },
        isotopeFilter: function() {
            var b = this,
            c = a("#portfolio-filter");
            c.find("a").on("click",
            function(d) {
                var e = a(this),
                f = e.attr("data-filter"),
                g = b.container.data("animationclass"),
                h = g ? g: "fadeInUp";
                c.find(".active").removeClass("active"),
                b.container.find(".pic-frame").removeClass("animate-item " + h),
                b.container.isotope({
                    filter: f
                }),
                e.addClass("active"),
                d.preventDefault()
            })
        },
        elementsAnimate: function() {
            var b = this.container.data("animationclass"),
            c = b ? b: "fadeInUp";
            this.container.find(".animate-item").each(function() {
                var b = a(this),
                d = b.data("animate-time");
                setTimeout(function() {
                    b.addClass("animated " + c)
                },
                d)
            }),
            this.container.isotope("layout")
        },
        hoverAnimation: function() {
            var b = this.container.data("rotateanimation"),
            c = b ? b: !1;
            a.fn.hoverdir && this.container.find("li").each(function() {
                a(this).hoverdir({
                    speed: 400,
                    hoverDelay: 0,
                    hoverElem: ".portfolio-overlay",/**#####**/
                    rotate3d: c
                })
            })
        },
        prettyPhoto: function() {
            a.fn.prettyPhoto && a("a[data-rel^='prettyPhoto']").prettyPhoto({
                hook: "data-rel",
                animation_speed: "fast",
                slideshow: 6e3,
                autoplay_slideshow: !0,
                show_title: !1,
                deeplinking: !1,
                social_tools: "",
                overlay_gallery: !0,
                opacity: .85
            })
        },
        infinitescroll: function() {
            var b = this;
            a.fn.infinitescroll && this.container.infinitescroll({
                navSelector: "#page-nav",
                nextSelector: "#page-nav a",
                itemSelector: ".pic-frame",
                loading: {
                    finishedMsg: "没有更多的结果了."
                    /*,img:"//eonythemes.com/themes/t/images/load.GIF"*/
                }
            },
            function(c) {
                b.container.isotope("appended", a(c)),
                b.calculateWidth(),
                b.elementsAnimate(),
                b.container.isotope("layout"),
                b.hoverAnimation(),
                b.prettyPhoto()
            })
        },
        openProject: function() {
            var b = a("#portfolio-single-content"),
            c = b.find(".single-portfolio");
            a(".open-btn").on("click",
            function(d) {
                if (b.hasClass("onepage-portfolio-single")) {
                    var e = b.offset().top - 80;
                    a("html, body").animate({
                        scrollTop: e
                    },
                    800),
                    a(c).fadeIn(1e3)
                } else a(b).fadeIn(1e3);
                d.preventDefault()
            })
        },
        closeProject: function() {
            var b = a("#portfolio-single-content"),
            c = b.find(".single-portfolio");
            a(".portfolio-close").on("click",
            function(d) {
                b.hasClass("onepage-portfolio-single") ? a(c).fadeOut(600) : a(b).fadeOut(600),
                d.preventDefault()
            })
        }
    };
    b.init(),
    a.event.special.debouncedresize ? a(window).on("debouncedresize",
    function() {
        b.calculateWidth(),
        b.isotopeReinit()
    }) : a(window).on("resize",
    function() {
        b.calculateWidth(),
        b.isotopeReinit()
    }),
    "undefined" != typeof Pace ? Pace.on("done",
    function() {
        b.elementsAnimate()
    }) : a(window).on("load",
    function() {
        b.elementsAnimate()
    })
} (jQuery);